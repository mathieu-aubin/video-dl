.\" generated with Ronn/v0.7.3
.\" http://github.com/rtomayko/ronn/tree/0.7.3
.
.TH "README" "" "January 2016" "" ""
Video download project\.
.
.P
 \fIhttps://travis\-ci\.org/danog/video\-dl\fR  \fIhttps://npmjs\.org/package/video\-dl\fR
.
.P
 \fIhttps://npmjs\.org/package/video\-dl\fR
.
.P
Read in Italian \fIhttps://github\.com/danog/video\-dl/blob/master/README\-IT\.md\fR
.
.P
View on Github \fIhttps://github\.com/danog/video\-dl/\fR
.
.P
Created by Daniil Gentili \fIhttp://daniil\.it\fR\.
.
.P
This project is licensed under the terms of the GPLv3 license\.
.
.P
The programs included in this project can be used to download videos from any generic site including the Italian Rai \fIhttp://rai\.tv\fR Television website (including rai replay and iframe videos), the italian Mediaset \fIhttp://mediaset\.it\fR website (including iframes like the ones on the Witty TV \fIhttp://wittytv\.it\fR website), the LA7 \fIhttp://la7\.it\fR website, and the Dplay \fIhttp://dplay\.com\fR website\. And thanks to youtube\-dl now they support lots of other websites!
.
.P
This project features:
.
.IP "\(bu" 4
A \fIBash script\fR that can be installed on
.
.IP "\(bu" 4
\fIAny Linux/Unix system\fR
.
.IP "\(bu" 4
\fIAndroid\fR
.
.IP "\(bu" 4
\fIMac OS X\fR
.
.IP "\(bu" 4
\fIiOS\fR and even on
.
.IP "\(bu" 4
\fIWindows\fR!
.
.IP "\(bu" 4
An \fIAPI\fR!
.
.IP "\(bu" 4
An \fIAndroid app\fR!
.
.IP "\(bu" 4
And even a \fIweb version\fR!
.
.IP "\(bu" 4
That can be \fIincorporated\fR in other websites!
.
.IP "" 0
.
.P
Both the \fIAPI\fR and the \fIweb version\fR use a database \fIhttps://github\.com/danog/video\-dl/blob/master/video_db\.sql\fR\.This project also features a web version \fIhttps://video\.daniil\.it/\fR\.
.
.P
.
.P
The source code of the page can be viewed here \fIhttps://github\.com/danog/video\-dl/blob/master/web\fR\.
.
.P
I used the following programs in the web version:
.
.IP "\(bu" 4
Loading animation (pace\.js) \fIhttps://github\.com/HubSpot/pace\fR
.
.IP "\(bu" 4
HTML entity encoder (he\.js) \fIhttps://github\.com/mathiasbynens/he\fR
.
.IP "\(bu" 4
Linkifier (linkify\.js) \fIhttps://github\.com/soapbox/linkifyjs/\fR
.
.IP "" 0
.
.P
And used the following theme as a base:
.
.IP "\(bu" 4
Bootstrap theme (freelancer) \fIhttps://github\.com/IronSummitMedia/startbootstrap\-freelancer\fR
.
.IP "" 0
You can incorporate this script in your website!
.
.br
Just include jquery and the video\-dl script with:
.
.br
```
.
.IP "" 4
.
.nf

Or install it using npm\.
.
.fi
.
.IP "" 0
.
.P
npm install video\-dl ```
.
.P
Here\'s a list of the functions and the usage instructions\.
.
.SH "Video Download function\."
.
.SS "Usage:"
.
.nf

video_dl(output, inputurl, dlsupport, messageoutput)
.
.fi
.
.SS "Parameters:"
.
.SS "output: output html element for the video info and the download urls\. Required\."
example: \fB#result\.\fR
.
.SS "inputurl: url of the video\. Required\."
example: \fB$("input#urljs")\.val()\fR
.
.SS "dlsupport: enables or disables the download attribute in the download links\. Optional\."
0 enables, anything disables\.
.
.SS "messageoutput: output html element for the contact module\. Optional\."
example: \fB#message\fR
.
.SS "Example:"
\fBvideo_dl("#result", $("input#urljs")\.val(), "0", "#message");\fR
.
.P
Let\'s say the \fBinput#urljs\fR text field has value \fB"http://www\.winx\.rai\.it/dl/RaiTV/programmi/media/ContentItem\-a27ccfe8\-b824\-4e85\-9a08\-d15e57fb61a0\.html#p=0"\fR\.
.
.P
The function will get the value of the \fBinput#urljs\fR element, get the download links from the API, and return the following output to the \fB#result\fR element:
.
.br
```
.
.br
.
.br
.
.br
.
.br
```
.
.P
The function will then start the mailtext function with the following parameters:
.
.br
\fBmailtext(messageoutput, inputurl);\fR
.
.P
See mailtext description for the result\.
.
.SH "First load function\."
Use to output supported websites list, prepare mail message and, only on the video\.daniil\.it website, hide the php submit module and use javascript engine instead\.
.
.SS "Usage:"
.
.nf

firstload(supportedurls, separatorstart, separatorend, messageoutput, videodaniilit)
.
.fi
.
.SS "Parameters:"
.
.SS "supportedurls: output html element for the supported websites list\. Required\."
Example: \fB#supportedurls\fR\.
.
.SS "separatorstart: first separator for the supported urls list: it will be put before every item in the supported websites list, if empty defaults to <code><br></code>\."
Optional, recommended\.
.
.br
Example: \fB<li>\fR
.
.SS "separatorend: the second separator for the supported urls list: it will be put after every url, if empty defaults to <code><br></code>\. Optional, recommended\."
Example: \fB</li>\fR
.
.SS "messageoutput: output html element for default contact module text\. Optional, recommended\."
Example: \fB#contact\fR
.
.SS "videodaniilit: If on video\.daniil\.it hides php module and unhides javascript text field\. Do not use\."
.
.SS "Example:"
.
.nf

firstload("#supportedurls", "<li>", "</li>", "#message");
.
.fi
.
.P
Let\'s say the url list is: \fBa b c d\fR\.
.
.P
Output printed to #supportedurls is:
.
.IP "" 4
.
.nf

<li>a</li><li>b</li><li>c</li><li>d</li><a href="http://lol\.daniil\.it" target="_blank">&#9786;</a></li>
.
.fi
.
.IP "" 0
.
.P
This will also create the default contact module text with \fBmailtext("#message");\fR
.
.SH "Contact module function\."
Prints a nice message to the contact module text field, with the url if it\'s provided else just With \fBinsert link\fR\.
.
.SS "Usage:"
.
.nf

mailtext(output, url)
.
.fi
.
.SS "Parameters:"
.
.SS "output: html element where to print out the contact message\. Required\."
Example: \fB#contact\fR
.
.SS "url: url of the video to insert into the message\. Not required, if not provided defaults to <code>insert link</code>\."
.
.SS "Example:"
.
.nf

mailtext("#contact", "http://google\.com");
.
.fi
.
.P
Will put \fBThe video: http://google\.com does not download, could you please fix it Thanks!\fR
.
.P
to \fB#contact\fR\.
.
.SH "Bash script usage:"
.
.nf

video\.sh [ \-qabp=player ] URL URL2 URL3 \.\.\.
video\.sh [ \-qabfp=player ] URLS\.txt URLS2\.txt URLS3\.txt \.\.\.


Do not forget to put the URL between quotes if it contains special chars like & or #\.

Run with \./video\.sh if you installed in a directory not in $PATH\.

Options:




\-q              Quiet mode: useful for crontab jobs, automatically enables \-a\.

\-a              Automatic mode: automatically download the video in the maximum quality\.

\-b              Use built\-in API engine: requires additional programs and may not work properly on some systems but may be faster than the API server\.

\-f              Read URL(s) from specified text file(s)\. If specified, you cannot provide URLs as arguments\.

\-p=player       Play the video instead of downloading it using specified player, mplayer if none specified\.

\-\-help          Show this extremely helpful message\.
.
.fi
.
.SH "Bash script installation instructions:"
.
.SS "Debian\-derived distros (Ubuntu, Linux mint, Bodhi Linux, etc\.)"
On debian\-derived distros, execute this command to add my repo to your system:
.
.IP "" 4
.
.nf

sudo wget \-q \-O /etc/apt/sources\.list\.d/daniil\.list http://dano\.cu\.cc/1IJrcd1 && wget \-q \-O \- http://dano\.cu\.cc/1Aci9Qp | sudo apt\-key add \- && sudo apt\-key adv \-\-recv\-keys \-\-keyserver keys\.gnupg\.net 72B97FD1D9672C93 && sudo apt\-get update
.
.fi
.
.IP "" 0
.
.P
You should see an OK if the operation was successful\.
.
.P
And this command to install the script\.
.
.IP "" 4
.
.nf

sudo apt\-get update; sudo apt\-get \-y install video\-dl
.
.fi
.
.IP "" 0
.
.SS "Any other Linux/Unix system (Ubuntu, Debian, Fedora, Redhat, openBSD, Mac OS X):"
Execute this command to install the script:
.
.IP "" 4
.
.nf

wget http://daniilgentili\.magix\.net/video\.sh \-O video\.sh || curl \-L http://daniilgentili\.magix\.net/video\.sh \-o video\.sh; chmod +x video\.sh
.
.fi
.
.IP "" 0
.
.P
Run with \./video\.sh in the directory where you downloaded it\.
.
.P
To use from any directory install the script directly in the $PATH using this command (run as root):
.
.IP "" 4
.
.nf

wget http://daniilgentili\.magix\.net/video\.sh \-O /usr/bin/video\.sh || curl \-L http://daniilgentili\.magix\.net/video\.sh \-o video\.sh; chmod +x /usr/bin/video\.sh
.
.fi
.
.IP "" 0
.
.P
Now you can run it with video\.sh in any directory\.
.
.SS "Android:"
.
.SS "Method 1 (app)\."
Enable unknown sources and install this app \fIhttp://bit\.ly/0192837465k\fR\. Once opened you will be presented with a user friendly interface similar to the web version\.
.
.SS "Changelog:"
1: initial version
.
.P
1\.2: added not working, share and credits button
.
.P
1\.2\.1: added external sharing option, fixed bugs
.
.P
1\.2\.2: Fixed not working button on external share URL, added google analytics, fixed Rai Replay on external share\.
.
.P
1\.3: Added auto update\.
.
.P
1\.4: Added more credits\.
.
.SS "Todo:"
You tell me!
.
.SS "Method 2 (script)\."
.
.SS "Install <a href=\"https://play\.google\.com/store/apps/details?id=stericson\.busybox\">Busybox</a>, <a href=\"https://play\.google\.com/store/apps/details?id=jackpal\.androidterm\">Jackpal\'s Terminal emulator</a> and <a href=\"https://play\.google\.com/store/apps/details?id=com\.bitcubate\.android\.bash\.installer\">Bash</a> on rooted devices or <a href=\"https://play\.google\.com/store/apps/details?id=burrows\.apps\.busybox\">Busybox no root</a> if your device isn\'t rooted\."
Video tutorial \fIhttps://www\.youtube\.com/watch?v=4NLs2NzHbbc\fR
.
.P
Note: if you can\'t copy & paste the commands directly in the Terminal Emulator app try this: paste them in the url bar one line at a time, copy them again from the url bar and try to paste them again in the Terminal Emulator app\. Run these commands: \fBcd /sdcard && wget http://daniilgentili\.magix\.net/android/video\.sh\fR
.
.P
Run with: \fBbash /sdcard/video\.sh\fR
.
.P
To install the script directly in the $PATH use these commands (here, root is mandatory)\.
.
.IP "" 4
.
.nf

su
mount \-o rw,remount /system && wget http://daniilgentili\.magix\.net/android/video\.sh \-O /system/bin/video\.sh && chmod 755 /system/bin/video\.sh
.
.fi
.
.IP "" 0
.
.P
If you cannot execute the script match the its shebang (the #!) to the location of the bash executable\.
.
.SS "iOS:"
Jailbreak your device, add the following repo to Cydia,
.
.IP "" 4
.
.nf

http://repo\.daniil\.it
.
.fi
.
.IP "" 0
.
.P
\&\.\.\. and install mobileterminal and video\-dl\.
.
.P
Run with video\.sh in mobileterminal\.
.
.P
To view and import the downloaded video to the gallery use iFile or Filza\.
.
.SS "Windows:"
Install Cygwin \fIhttps://www\.cygwin\.com\fR (don\'t forget to install wget and sed during the installation process!), open its command prompt and type:
.
.IP "" 4
.
.nf

wget http://daniilgentili\.magix\.net/win/video\.sh \-O video\.sh
.
.fi
.
.IP "" 0
.
.P
Run with \fB\./video\.sh\fR in the directory where you downloaded it\.
.
.P
To run the script from any directory run the following commands:
.
.IP "" 4
.
.nf

cd /bin && wget http://daniilgentili\.magix\.net/win/video\.sh \-O video\.sh && cd $OLDPWD
.
.fi
.
.IP "" 0
.
.SH "API"
This project also features an API \fIhttp://video\.daniil\.it/api/\fR\.
.
.P
The source code of the API can be viewed here \fIhttps://github\.com/danog/video\-dl/blob/master/api\fR\.
.
.P
The API uses youtube\-dl \fIhttps://github\.com/rg3/youtube\-dl\fR to get the links for non Rai/mediaset/la7/dplay/wittytv videos\.
.
.P
The API supports GET requests and the endpoint is http://api\.daniil\.it (supports https)\.
.
.SS "Supported parameters:"
.
.SS "url"
The value should be the percent\-encoded URL of the video to download\. The response will be a list of URLS with the corresponding quality name, format, size and dimension\.
.
.P
Example:
.
.IP "" 4
.
.nf

http://api\.daniil\.it/?url=http://www\.winx\.rai\.it/dl/RaiTV/programmi/media/ContentItem\-47307196\-8fd1\-46f8\-8b31\-92ae5f9b5089\.html#p=0
.
.fi
.
.IP "" 0
.
.P
Output:
.
.IP "" 4
.
.nf

Winx_Club_VI_Ep3_Il_collegio_volante Winx Club VI \- Ep\.3: Il collegio volante
Highest quality (mp4, 286MB, 1024x576) http://creativemedia4\.rai\.it/Italy/podcastcdn/junior/Winx/Winx_6_puntate/2189463_1800\.mp4
Medium\-low quality (mp4, 131MB, 700x394) http://creativemedia4\.rai\.it/Italy/podcastcdn/junior/Winx/Winx_6_puntate/2189463_800\.mp4
.
.fi
.
.IP "" 0
.
.P
Explanation:
.
.IP "" 4
.
.nf

Winx_Club_VI_Ep3_Il_collegio_volante Winx Club VI \- Ep\.3: Il collegio volante
.
.fi
.
.IP "" 0
.
.P
Sanitized name of video for file name Original name of the video for printing to user output
.
.IP "" 4
.
.nf

Highest quality (mp4, 286MB, 1024x576) http://creativemedia4\.rai\.it/Italy/podcastcdn/junior/Winx/Winx_6_puntate/2189463_1800\.mp4
.
.fi
.
.IP "" 0
.
.P
Quality name (format, size, dimension) URL of the video
.
.IP "" 4
.
.nf

Medium\-low quality (mp4, 131MB, 700x394) http://creativemedia4\.rai\.it/Italy/podcastcdn/junior/Winx/Winx_6_puntate/2189463_800\.mp4
.
.fi
.
.IP "" 0
.
.P
Quality name (format, size, dimension) URL of the video
.
.P
The qualities are ordered in decreasing order by dimension\.
.
.SS "p"
Supports the following values:
.
.IP "" 4
.
.nf

websites
.
.fi
.
.IP "" 0
.
.P
returns a shortened list of supported websites\.
.
.IP "" 4
.
.nf

allwebsites
.
.fi
.
.IP "" 0
.
.P
returns a full list of supported websites\.
.
.SH "Contribute!"
If you created a program that uses this API contact me \fIhttp://daniil\.it\fR and I will put it on this page!
.
.P
That\'s it!
.
.P
Enjoy!
.
.P
Daniil Gentili \fIhttp://daniil\.it\fR
